!function e(t,n,a){function i(o,s){if(!n[o]){if(!t[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(r)return r(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return i(n||e)},c,c.exports,e,t,n,a)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(e,t,n){var a=window.jQuery;!function(t){"use strict";function n(){return a(i).contents().find("."+o)}var i,r,o="typo_hl_block";app.listenTo(app.channel,"canvas:handshake",function(){i=this.el.querySelector("#tailor-sidebar-preview"),r=i.contentWindow.app.channel,app.listenTo(r,"canvas:select",function(e){window.$selectedEl=e.$el}),app.listenTo(r,"element:refresh element:jSrefresh",function(e){window.$selectedEl=e.$el,app.channel.trigger("sidebar:element_content_changed",e.$el)})}),app.listenTo(app.channel,"modal:destroy",function(){n().removeClass(o)}),app.listenTo(app.channel,"sidebar:element_selected",function(e){var t=a(i).contents().find(".is-editing"),r=n();t="all"!=e?t.find(e):t,r.removeClass(o),t.addClass(o)}),app.on("before:start",function(){t.Controls.TypographyGroup=e("./sidebar/components/controls/typography-group.js")})}(window.Tailor||{})},{"./sidebar/components/controls/typography-group.js":2}],2:[function(e,t,n){function a(){return d+("all"==h?"":"."+h)}function i(e){return e.replace(/(^.*\[|\].*$)/g,"")}function r(e,t,n){var a=i(t.name);return""!==t.value&&""!==a&&(_.isObject(e[n])||(e[n]={}),e[n][a]=t.value),e}var o,s=e("../../../../../../../tailor/assets/js/src/sidebar/components/controls/abstract-control.js"),u=e("../typography-helper.js"),l=window.jQuery,c=["desktop","tablet","mobile"],d="all",h="all",p={all:"all"},g=_.extend({},p),f={all:"all"},m=_.extend({},f),v={all:{all:"all"}},b=_.extend({},v);o=s.extend({firstRender:!0,ui:{select_input:"select",button_group_input:".control__body .button",range_input:"input[type=range]",text_input:"input[type=text]",mediaButton:".js-setting-group .button",defaultButton:".js-default",controlGroups:".control__body > *"},events:{"change @ui.select_input":"onSelectChange","click @ui.button_group_input":"onButtonGroupChange","input @ui.range_input":"onRangeInput","mouseup @ui.range_input":"onRangeChange","keyup @ui.text_input":"onRangeChange","click @ui.mediaButton":"onMediaButtonChange","click @ui.defaultButton":"onDefaultButtonChange"},addListeners:function(){this.listenTo(app.channel,"sidebar:element_content_changed",function(e){this.parseAllSubElements(window.$selectedEl[0]),this.render()})},onMediaButtonChange:function(e){this.media=e.currentTarget.getAttribute("data-media"),app.channel.trigger("sidebar:device",this.media),this.onFieldChange(e,"media_button"),this.updateControlGroups(),this.render()},onRender:function(){this.updateControlGroups()},templateHelpers:{getCurrentValue:function(e,t){var n=void 0,i=a();try{n=this.values[e][i][t]}catch(e){}return n},selected:function(e,t,n){return n==this.getCurrentValue(e,t)?"selected":""},active:function(e,t,n){return n==this.getCurrentValue(e,t)?"active":""},is_selected_sub_element:function(e){return e==d?"selected":""},is_selected_class:function(e){return e==h?"selected":""}},addSerializedData:function(e){return this.firstRender&&(d="all",h="all",this.firstRender=!1,this.parseAllSubElements(window.$selectedEl[0]),this.addListeners()),e.values=this.getCurrentValues(e.params),e.params.media=this.media,e.params.element_blocks=g,e.params.block_classes=m,e.selectedSubElement=a(),e},getCurrentValues:function(e){function t(e,t,a,i){_.isObject(n[i])||(n[i]={}),_.isObject(n[i][e])||(n[i][e]={}),n[i][e][t]=a}var n=this.getValues(),a=this;_.each(c,function(e){var t;try{t=JSON.parse(n[e])}catch(e){}_.isObject(t)||(t={});var i=t[a.getCurrentSubElement()];_.isObject(i)||(i={}),_.isObject(t)?n[e]=t:n[e]={},n[e][a.getCurrentSubElement()]=i});var i=JSON.parse(JSON.stringify(n));return _.each(g,function(n){_.each(b[n],function(a){var r=n+("all"==a?"":"."+a);_.each(e,function(e,n){_.each(c,function(e){var a=u.getElementClassParamValueForMedia(r,n,e,i);null!=a&&t(r,n,a,e)})})})}),n},getCurrentSubElement:function(){return d},parseAllSubElements:function(e){function t(e,n){var a={},i=e.classList[0],r=e.tagName.toLowerCase();return n||(a[r]=r),_.isObject(b[r])||(b[r]={all:"all"}),n||void 0===i||(b[r][i]=i),l.each(e.children,function(e,n){a=_.extend(a,t(n,!1))}),a}g=_.extend({},p),b=_.extend({},v),g=_.extend(g,t(e,!0)),m=b[d]},onSelectChange:function(e){var t=e.currentTarget,n=!1,a=i(e.currentTarget.name);"sub_element"==a&&t.value!=d&&(d=t.value,h="all",n=!0,m=b[d]),"block_classes"==a&&0==n&&(h=t.value),this.onFieldChange(e,"select")},onButtonGroupChange:function(e){_.each(e.currentTarget.parentElement.children,function(e){e.classList.remove("active")}),e.currentTarget.classList.add("active"),this.onFieldChange(e,"button_group")},onRangeChange:function(e){var t=e.target.value;this.ui.text_input.filter('[name^="'+e.currentTarget.name+'"]').val(t),this.ui.range_input.filter('[name^="'+e.currentTarget.name+'"]').val(t),this.onFieldChange(e,"range")},onRangeInput:function(e){var t=e.target.value;this.ui.text_input.filter('[name^="'+e.currentTarget.name+'"]').val(t),this.ui.range_input.filter('[name^="'+e.currentTarget.name+'"]').val(t)},onFieldChange:function(e,t){var n,o=i(e.currentTarget.name),s=this.getValues();try{n=JSON.parse(s[this.media])}catch(e){n={}}"sub_element"!=o&&"block_classes"!=o?(void 0==n[a()]&&(n[a()]={}),n=r(n,e.currentTarget,a())):app.channel.trigger("sidebar:element_selected",a()),n=JSON.stringify(n),this.setValue(n),this.updateControlGroups(),this.render()}}),t.exports=o},{"../../../../../../../tailor/assets/js/src/sidebar/components/controls/abstract-control.js":4,"../typography-helper.js":3}],3:[function(e,t,n){var a=["font_family","font_size","font_weight","font_transform","font_style","line_height","letter_spacing"],i=["desktop","tablet","mobile"];TypographyHelper={cleanUnit:function(e){var t=["pt","px","em","rm"];return _.contains(t,e)?e:"px"},findParamValue:function(e,t){var n=null;return _.each(e,function(e,a){a==t&&(n=e)}),n},getElementClassParamValueForMedia:function(e,t,n,a){var i,r=e.split(".")[0];try{i=a[n][e][t]}catch(e){}if(void 0===i)try{i=a[n][r][t]}catch(e){}if(void 0===i)try{i=a[n].all[t]}catch(e){}if(void 0===i&&"desktop"!=n)try{i=a.desktop[e][t]}catch(e){}if(void 0===i&&"desktop"!=n)try{i=a.desktop[r][t]}catch(e){}if(void 0===i&&"desktop"!=n)try{i=a.desktop.all[t]}catch(e){}return void 0===i?null:i},getCompiledStyles:function(e){var t,n,r,o={},s=this,u=[];try{t=JSON.parse(e.attributes.atts.typography_group)}catch(e){t={}}try{n=JSON.parse(e.attributes.atts.typography_group_tablet)}catch(e){n={}}try{r=JSON.parse(e.attributes.atts.typography_group_mobile)}catch(e){r={}}o.desktop=t,o.tablet=n,o.mobile=r;var l=[];return _.each(i,function(e){_.each(o[e],function(e,t){-1==_.indexOf(l,t)&&l.push(t)})}),_.each(i,function(e){_.each(l,function(t,n){var i=[],r=s.cleanUnit(s.getElementClassParamValueForMedia(t,"font_size_unit",e,o)),l=s.cleanUnit(s.getElementClassParamValueForMedia(t,"line_height_unit",e,o)),c=s.cleanUnit(s.getElementClassParamValueForMedia(t,"letter_spacing_unit",e,o)),d="all"==t?" *":t;d="blockquote"==d?d+" *":d,i.push(d),_.each(a,function(n){var a=null,d={selectors:i,media:e},h=s.getElementClassParamValueForMedia(t,n,e,o);if(null!==h)switch(n){case"font_family":"inherit"!=h&&(a=_.extend(d,{declarations:{"font-family":h}}));break;case"font_size":a=_.extend(d,{declarations:{"font-size":"0"==h?"inherit":h+r}});break;case"font_weight":a=_.extend(d,{declarations:{"font-weight":h}});break;case"font_transform":a=_.extend(d,{declarations:{"text-transform":h}});break;case"font_style":a=_.extend(d,{declarations:{"font-style":h}});break;case"line_height":a=_.extend(d,{declarations:{"line-height":"0"==h?"inherit":h+l}});break;case"letter_spacing":a=_.extend(d,{declarations:{"letter-spacing":"0"==h?"inherit":h+c}})}null!==a&&u.push(a)})})}),u}},t.exports=TypographyHelper},{}],4:[function(e,t,n){var a,i=window.jQuery;a=Marionette.ItemView.extend({tagName:"li",media:"desktop",ui:{input:"input",mediaButton:".js-setting-group .button",defaultButton:".js-default",controlGroups:".control__body > *"},events:{"blur @ui.input":"onFieldChange","click @ui.mediaButton":"onMediaButtonChange","click @ui.defaultButton":"onDefaultButtonChange"},className:function(){return"control control--"+this.model.get("type")},getTemplate:function(){return"#tmpl-tailor-control-"+this.model.get("type")},serializeData:function(){var e=Backbone.Marionette.ItemView.prototype.serializeData.apply(this,arguments);return e.values=this.getValues(),e.hideDefault=this.checkDefault(e.values),e=this.addSerializedData(e)},addSerializedData:function(e){return e},checkDefault:function(e){var t=!0;return _.each(this.getDefaults(),function(n,a){_.isNull(n)||!e.hasOwnProperty(a)||_.isNull(e[a])||n===e[a]||(t=!1)}),t},initialize:function(){this.addEventListeners(),this.checkDependencies()},addEventListeners:function(){_.each(this.getSettings(),function(e){this.listenTo(e,"change",this.onSettingChange)},this),this.listenTo(this.getSetting().collection,"change",this.checkDependencies)},checkDependencies:function(e){e=e||this.getSetting();var t=this.model.get("dependencies"),n=e.collection,a=!0;for(var i in t)if(t.hasOwnProperty(i)){var r=n.get(i);if(!r)continue;var o=t[i].condition,s=r.get("value"),u=t[i].value;if(!Tailor.Helpers.checkCondition(o,s,u)){a=!1;break}}this.$el.toggle(a)},onRender:function(){this.updateControlGroups()},onMediaButtonChange:function(e){this.media=e.currentTarget.getAttribute("data-media"),app.channel.trigger("sidebar:device",this.media),this.updateControlGroups()},onDefaultButtonChange:function(){this.restoreDefaults(),this.render()},onFieldChange:function(){this.setValue(this.ui.input.filter('[name^="'+this.media+'"]').val())},onSettingChange:function(){this.updateDefaultButton()},updateControlGroups:function(){var e=this.media;this.ui.controlGroups.each(function(){i(this).toggleClass("is-hidden",e!=this.id)}),this.ui.mediaButton.each(function(){i(this).toggleClass("active",e==this.getAttribute("data-media"))})},updateDefaultButton:function(){this.ui.defaultButton.toggleClass("is-hidden",this.checkDefault(this.getValues()))},getSettings:function(){return this.model.settings},getSetting:function(e){e=e||this.media;var t=this.getSettings();for(var n in t)if(t.hasOwnProperty(n)&&t[n].media==e)return t[n];return!1},getDefaults:function(){var e={};return _.each(this.getSettings(),function(t){e[t.media]=t.get("default")}),e},getValues:function(){var e={};return _.each(this.getSettings(),function(t){e[t.media]=t.get("value")||""}),e},getDefault:function(){return this.getSetting().get("default")},getValue:function(){return this.getSetting().get("value")},setValue:function(e){this.getSetting().set("value",e)},restoreDefaults:function(){_.each(this.getSettings(),function(e){e.set("value",e.get("default"))})}}),t.exports=a},{}]},{},[1]);